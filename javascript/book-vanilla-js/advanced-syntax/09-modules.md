# JavaScript - 모듈(Modules)

> [바닐라 자바스크립트 - 고승원 (비제이퍼블릭)](http://www.yes24.com/Product/Goods/105608999) 도서를 읽고 학습한 내용을 정리한 내용입니다.

---

## 모듈

- 프로그램 크기가 커져서 기능별 또는 구조별로 파일을 분할하여 관리해야 될 때 이러한 파일 하나하나 등을 모듈이라 부른다.

> 여기선 자바스크립트 모듈과 관련하여 중요한 특징 및 간단한 사용법만 정리한다.

### 모듈 특징

- 모듈은 항상 엄격모드(use strict)로 실행된다. (엄격 모드는 추후 학습하기)
- 자신만의 스코프를 가지기 때문에 다른 스크립트에서 모듈 내의 변수나 함수에 접근이 불가능하다. 외부 공개 시엔 export, 공개되어진 모듈을 내부에서 사용하고자 한다면 import 를 해야 한다.
- 모듈 내에 변수나 함수 등의 선언을 export 키워드로 내보낼 수 있다.
- 모듈은 최초 호출 시 단 한번만 실행되며, 실행 후 결과는 해당 모듈을 import 하는 모든 모듈에 내보내지게 된다. 따라서 다른 모듈에서 import 한 후 관련 내용을 변경했을 때 변경 내용을 공유하게 된다.
- 브라우저에서의 모듈
  - HTML 내부에서 script 태그로 모듈을 사용하고 싶으면 `type="module"` 을 태그 내에 설정해야 한다.
  - 모듈로 평가되는 스크립트는 항상 **지연 실행**된다.
    - HTML 파싱이 모두 끝난 이후에 실행된다.
  - 브라우저에서 모듈 import를 할 때 반드시 절대경로나 상대경로를 명시한다.

### 모듈 사용하기

#### 모듈 가져오기

```js
import {something, someFunction} from './some.js';
import {something as someObj, someFunction as someFunc} from './some.js';
import * as some from './some.js';
```

- 스크립트 내부에서 위와 같이 import 와 from 키워드를 이용하여 가져온다.
- import 에는 `{}`를 이용하여 모듈 내에서 export 되는 대상을 구별하여 가져올 수 있다. 또한 `as` 키워드를 사용하여 특정 별칭으로 이름을 바꿔 가져오는 것도 가능하다.
- from에는 모듈의 경로를 문자열로 명시해준다. (노드나 번들링 툴이 아닌 일반 브라우저에서 모듈 사용시엔 절대나 상대경로로 작성)
- `*`과 as 를 이용하여 별칭 형태로 모듈 내 모든 대상을 가져와 사용할 수도 있다.

#### 모듈 내보내기

```js
export class SomeClass {
  ~
}

export function someFunction() {
  ~
}

```

- 내보내기는 특정 개체의 선언부에 `export` 키워드를 명시하여 사용한다.

```js
let numArray = [1, 2, 3, 4, 5];
function funcTest() {
  return null;
}

export {numArray, funcTest as testFunction};
```

- `{}` 를 사용하여 선언부 결합과 상관없이 내보내는 것도 가능하다. 또한 import 와 마찬가지로 `as` 키워드를 사용하여 다른 이름으로 내보낼 수 있다.

```js
export default class User {
  ~
}
```

- default 키워드를 같이 사용하여 하나의 모듈 내에 하나의 개체만 내보내서 사용할 수도 있다.
- import 시 따로 `{}`로 특정하지 않고 default 된 개체만 사용한다.
- export와 default를 같이 명시하는 경우 보통 하나의 개체만 내보내기 위한 목적임으로 모듈 내에서 선언된 이름을 명확히 명시하지 않아도 괜찮다고 한다.

---

## 정리

- 자바스크립트의 영향력이 커지면서 모듈에 대한 웹 표준이 생기게 되었다.
- 모듈 적용 여부에 따라 스크립트는 일반 또는 모듈 스크립트로 나누어 진다.
- 모듈 적용에 있어 HTML 파싱과도 연관지어 생각해야 한다.
- 브라우저에서 적용되는 모듈 특징을 알고 있어야 한다.

> 기본적인 개념 및 사용법만 정리한 것이라 추가적인 학습이 필요(엄격 모드 개념, 모듈의 다양한 사용법, 동적으로 모듈 가져오기 등등)
 
---

**참고 자료**

- [모던 자바스크립트 - 모듈](https://ko.javascript.info/modules-intro)